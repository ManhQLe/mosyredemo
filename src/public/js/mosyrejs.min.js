!function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=2)}([function(t,n,e){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),i=function(){function t(){o(this,t)}return r(t,[{key:"onCommunication",value:function(t,n,e){}},{key:"onConnection",value:function(t,n){}}],[{key:"connect",value:function(t,n,e,o){t.onConnection(n,e),n.onConnection(t,o||e)}},{key:"vibrate",value:function(t,n,e,o){t.onCommunication(o,n,e)}}]),t}();t.exports=i},function(t,n,e){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var c=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),a=e(0),u=function(t){function n(t){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.__={agreement:t||{},contacts:null},e.createProp("agreement",void 0,n.CONST.defaultGet,n.CONST.defaultSet,e.__),e.createProp("contacts",void 0,n.CONST.defaultGet,n.CONST.defaultSet,e.__),e}return i(n,t),c(n,[{key:"createProp",value:function(t,e,o,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.__.agreement;n.createProp(this,t,e,o,r,i)}},{key:"getAgreement",value:function(){return this.__.agreement}},{key:"isSameConnectionPoint",value:function(t,n){return t===n}}],[{key:"createProp",value:function(t,e,o,r,i,c){r||(r=n.CONST.defaultGet),i||(i=n.CONST.defaultSet),Object.defineProperty(t,e,{get:function(){return r.call(this,e,c,o)},set:function(t){i.call(this,e,c,t)}})}}]),n}(a);u.CONST={noSet:function(){},defaultGet:function(t,n,e){return!(n.hasOwnProperty(t)||void 0===e)&&(this[t]=e),n[t]},defaultSet:function(t,n,e){n[t]=e}},t.exports=u},function(t,n,e){"use strict";var o=e(0),r=e(3),i=e(4),c=e(1),a=e(5);window.mosyrejs={Clay:o,Conduit:r,RClay:i,AttribClay:c,SClay:a}},function(t,n,e){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var c=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),a=e(0),u=e(1),f=function(t){function n(t){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.contacts=[],e.createProp("ParallelTrx",!0),e}return i(n,t),c(n,[{key:"onConnection",value:function(t,e){var o=this.contacts.find(function(n){var e=n.clay;return t===e});o||(o={clay:null,cps:[]},this.contacts.push(o));var r=o,i=(r.clay,r.cps);if(!(t instanceof n)){var c=!0,a=!0,u=!1,f=void 0;try{for(var s,l=i[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var p=s.value;if(this.isSameConnectionPoint(p,e)){c=!1;break}}}catch(t){u=!0,f=t}finally{try{!a&&l.return&&l.return()}finally{if(u)throw f}}c&&(o.clay=t,i.push(e))}}},{key:"onCommunication",value:function(t,n,e){var o=this,r=this.contacts.find(function(n){return n.clay===t});if(r&&r.cps.find(function(t){return o.isSameConnectionPoint(t,n)})){var i=!0,c=!1,u=void 0;try{for(var f,s=this.contacts[Symbol.iterator]();!(i=(f=s.next()).done);i=!0){var l=f.value;!function(r){var i=r.cps,c=r.clay;i.forEach(function(r){o.isSameConnectionPoint(r,n)&&c===t||(o.ParallelTrx?setTimeout(a.vibrate,0,c,r,e,o):c.onCommunication(o,r,e))})}(l)}}catch(t){c=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(c)throw u}}}}},{key:"link",value:function(t){for(var n=0;n<t.length;n+=2)a.connect(t[n],this,t[n+1]);return this}}]),n}(u);f.createLink=function(){for(var t=new f,n=arguments.length,e=Array(n),o=0;o<n;o++)e[o]=arguments[o];return t.link(e)},f.link=function(t,n,e,o){return f.fromArray([t,n,o,e])},f.fromArray=function(t){return(new f).link(t)},t.exports=f},function(t,n,e){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}function c(t,n,e){var o=t.__,r=o.contacts,i=o.signalStore,c=o.collected,a=t.connectPoints;if(a.findIndex(function(e){return t.isSameConnectionPoint(e,n)})>=0)i[n]=e,c.add(n),c.size===a.length&&(t.staged&&c.clear(),t.onResponse(n));else{var f=r.find(function(e){return t.isSameConnectionPoint(e.cp,n)});f&&f.clays.forEach(function(o){return u.vibrate(o,n,e,t)})}}var a=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),u=e(0),f=e(1),s=function(t){function n(t){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.contacts=[],e.__.signalStore={},e.__.collected=new Set,e.createProp("staged",!1),e.createProp("connectPoints",[]),e.createProp("response",function(){}),e.createProp("init",function(){}),e.__.center=new Proxy(e,{get:function(t,n){return t.__.signalStore[n]},set:function(t,n,e){return c(t,n,e),!0}}),e.onInit(),e}return i(n,t),a(n,[{key:"onConnection",value:function(t,n){var e=this,o=this.contacts,r=o.find(function(t){return e.isSameConnectionPoint(t.cp,n)});r||(r={clays:[],cp:n},o.push(r));var i=r,c=i.clays;i.cp;c.findIndex(function(n){return n===t})>=0||c.push(t)}},{key:"onCommunication",value:function(t,n,e){var o=this,r=this.contacts,i=this.connectPoints,c=r.find(function(t){return o.isSameConnectionPoint(t.cp,n)});i.find(function(t){return o.isSameConnectionPoint(t,n)})&&c&&c.clays.findIndex(function(n){return n===t})>=0&&(this.__.center[n]=e)}},{key:"onResponse",value:function(t){this.response(this.__.center,this)}},{key:"onInit",value:function(){this.init(this)}},{key:"getCenter",value:function(){return this.__.center}}]),n}(f);t.exports=s},function(t,n,e){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function r(t,n){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!n||"object"!=typeof n&&"function"!=typeof n?t:n}function i(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function, not "+typeof n);t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),n&&(Object.setPrototypeOf?Object.setPrototypeOf(t,n):t.__proto__=n)}var c=function(){function t(t,n){var e=[],o=!0,r=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(o=(c=a.next()).done)&&(e.push(c.value),!n||e.length!==n);o=!0);}catch(t){r=!0,i=t}finally{try{!o&&a.return&&a.return()}finally{if(r)throw i}}return e}return function(n,e){if(Array.isArray(n))return n;if(Symbol.iterator in Object(n))return t(n,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(n,e,o){return e&&t(n.prototype,e),o&&t(n,o),n}}(),u=e(0),f=e(1),s=function(t){function n(t){o(this,n);var e=r(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return e.createProp("layoutMap",[]),e.createProp("build",function(t){return t.agreement.layoutMap}),e.__.map=e.onBuild(),e.contacts=[],e.contactPoints=[],e.__.map.forEach(function(t){var n=c(t,3),o=n[0],r=n[1],i=n[2];e.contactPoints.push(o),u.connect(e,r,o,i)}),e}return i(n,t),a(n,[{key:"onCommunication",value:function(t,n,e){var o=this,r=this.__.map,i=this.contacts,a=r.find(function(n){return n[1]===t});if(a){i.find(function(t){return o.isSameConnectionPoint(t.cp,a[0])}).clays.forEach(function(n){n!==t&&u.vibrate(n,a[0],e,o)})}else{i.find(function(t){return o.isSameConnectionPoint(t.cp,n)})&&r.forEach(function(t){var r=c(t,3),i=r[0],a=r[1],f=r[2];o.isSameConnectionPoint(i,n)&&u.vibrate(a,f,e,o)})}}},{key:"onConnection",value:function(t,n){var e=this,o=this.contacts,r=o.find(function(t){return e.isSameConnectionPoint(t.cp,n)});r||(r={clays:[],cp:n},o.push(r));var i=r,c=i.clays;i.cp;c.find(function(n){return n===t})||c.push(t)}},{key:"onBuild",value:function(){return this.build(this)}}]),n}(f);t.exports=s}]);